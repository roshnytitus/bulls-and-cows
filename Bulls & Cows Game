# Roshny Titus
# Bulls and Cows Game

import random
import time

def print_slowly(text):
    for char in text:
        print(char, end='', flush=True)
        time.sleep(0.24)
    print()

def check_bulls(guess_array, number):
    bulls = 0
    for i in range(4):
        if guess_array[i] == number[i]:
            bulls += 1
    return bulls

def check_cows(guess_array, number):
    cows = 0
    for i in range(4):
        if guess_array[i] in number:
            cows += 1
    return cows - check_bulls(guess_array, number)

def main():
    print("\033[34mWelcome to BULLS & COWS\033[0m\n")
    
    rules = input("Would you like to read the rules? (Yes or No)\n").lower()
    
    while rules not in ["yes", "no"]:
        print("Please enter 'yes' or 'no'.")
        rules = input().lower()
    
    print("")
    
    if rules == "yes":
        time.sleep(0.3)
        print("Rules: You must guess a four-digit number, where each digit is different and within the range of 1 to 9.")
        time.sleep(1)
        print("After every guess, you will be told how many bulls and cows you have.")
        time.sleep(1)
        print("Bulls are the number of digits you guessed with the correct value and correct position.")
        time.sleep(1)
        print("Cows are the number of digits you guessed with the correct value but incorrect position.")
        time.sleep(1)
        print("Try to guess the number is as few tries as possible! Have fun!\n")
    else:
        print("Let's start then!\n")
    
    replay = "yes"
    
    while replay == "yes":
        a, b, c, d = random.sample(range(1, 10), 4)
        number = [a, b, c, d]
        
        start = "RANDOM NUMBER : ????"
        print_slowly(start)
        
        guess_count = 0
        bulls = 0
        
        while bulls != 4:
            incorrect_entry = True
            
            while incorrect_entry:
                cont = False
                while not cont:
                    try:
                        guess = int(input("\nWhat is your guess?\n"))
                        cont = True
                    except ValueError:
                        print("\033[31mIncorrect info type; Please enter an integer!\033[0m")
                
                if guess < 1000 or guess > 9999:
                    print("\033[31mPlease re-enter your guess with a four-digit number.\033[0m")
                    continue
                
                guess_array = [int(digit) for digit in str(guess)]
                
                if len(set(guess_array)) < 4:
                    print("\033[31mMake sure each digit of your guess is different!\033[0m")
                    continue
                
                if any(digit < 1 or digit > 9 for digit in guess_array):
                    print("\033[31mTry to make sure each digit is within the range of 1 - 9!\033[0m")
                    continue
                
                incorrect_entry = False
            
            guess_count += 1
            bulls = check_bulls(guess_array, number)
            cows = check_cows(guess_array, number)
            
            print(f"BULLS: {bulls}     COWS: {cows}")
            
            if bulls == 4:
                print("\033[35mCongratulations! You won!\033[0m")
            else:
                print("\033[35mTry again!\033[0m")
        
        print(f"\nIt only took you {guess_count} tries! Would you like to play again? (Yes or No)")
        replay = input().lower()
        print()

    print("\033[34mThanks for playing BULLS & COWS!\033[0m")

if __name__ == "__main__":
    main()
